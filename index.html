<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NaniWatch</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="dynamic-bg"></div>

    <button id="btnProfile" class="nav-btn top-left-main" onclick="openAbout()">
      <i class="fas fa-user-circle" style="font-size: 1.5rem"></i>
    </button>

    <div id="homeView" class="container">
      <div class="top-nav zen-hide desktop-only">
        <button class="nav-btn" onclick="openScan()">
          <i class="fas fa-camera"></i>
          <span data-lang="btn_scan" style="margin-left: 5px">Scan</span>
        </button>
        <button class="nav-btn" onclick="openFavorites()">
          <i class="fas fa-heart"></i>
          <span data-lang="btn_fav" style="margin-left: 5px">Favorit</span>
        </button>
        <button class="nav-btn" onclick="openHistory()">
          <i class="fas fa-history"></i>
          <span data-lang="btn_history" style="margin-left: 5px">Riwayat</span>
        </button>
      </div>

      <h1 class="zen-hide" data-lang="title">Cari Anime</h1>
      <h3
        id="greetingText"
        class="zen-hide"
        style="margin-bottom: 5px; color: #fff"
      ></h3>
      <p class="zen-hide" data-lang="desc_atas">
        Sesuaikan dengan seleramu hari ini!
      </p>

      <div id="quickTags" class="quick-tags zen-hide"></div>

      <div class="mode-switcher zen-hide">
        <button
          id="modeAnime"
          class="mode-btn active"
          onclick="switchMode('anime')"
          data-lang="mode_anime"
        >
          Anime
        </button>
        <button
          id="modeDonghua"
          class="mode-btn"
          onclick="switchMode('donghua')"
          data-lang="mode_donghua"
        >
          Donghua
        </button>
        <button
          id="modeChar"
          class="mode-btn"
          onclick="switchMode('character')"
          data-lang="mode_char"
        >
          Karakter
        </button>
      </div>

      <div id="trendingSection" class="trending-wrapper zen-hide">
        <h3
          data-lang="trending_title"
          style="
            text-align: left;
            margin-left: 15px;
            margin-bottom: 10px;
            font-size: 1rem;
            color: var(--main-color);
          "
        >
          üî• Sedang Tayang
        </h3>
        <div id="trendingList" class="trending-list">
          <div class="loading-trending">Memuat...</div>
        </div>
      </div>

      <div id="filterArea" class="filter-box zen-hide">
        <select id="inputGenre" class="custom-input">
          <option value="" data-lang="opt_random">Semua Genre</option>
          <optgroup data-lang="grp_main" label="Genre Utama">
            <option value="1" data-lang="g_action">Action</option>
            <option value="2" data-lang="g_adventure">Adventure</option>
            <option value="4" data-lang="g_comedy">Comedy</option>
            <option value="8" data-lang="g_drama">Drama</option>
            <option value="10" data-lang="g_fantasy">Fantasy</option>
            <option value="14" data-lang="g_horror">Horror</option>
            <option value="7" data-lang="g_mystery">Mystery</option>
            <option value="22" data-lang="g_romance">Romance</option>
            <option value="24" data-lang="g_scifi">Sci-Fi</option>
            <option value="36" data-lang="g_slice">Slice of Life</option>
            <option value="30" data-lang="g_sports">Sports</option>
            <option value="37" data-lang="g_supernatural">Supernatural</option>
            <option value="41" data-lang="g_suspense">Suspense</option>
          </optgroup>
          <optgroup data-lang="grp_theme" label="Tema">
            <option value="62" data-lang="t_isekai">Isekai</option>
            <option value="18" data-lang="t_mecha">Mecha</option>
            <option value="23" data-lang="t_school">School</option>
            <option value="13" data-lang="t_historical">Historical</option>
            <option value="19" data-lang="t_music">Music</option>
            <option value="40" data-lang="t_psychological">
              Psychological
            </option>
            <option value="38" data-lang="t_military">Military</option>
            <option value="3" data-lang="t_racing">Racing</option>
            <option value="32" data-lang="t_vampire">Vampire</option>
            <option value="31" data-lang="t_superpower">Super Power</option>
            <option value="17" data-lang="t_martial">Martial Arts</option>
          </optgroup>
          <optgroup data-lang="grp_demo" label="Target Penonton">
            <option value="27" data-lang="d_shounen">Shounen</option>
            <option value="25" data-lang="d_shoujo">Shoujo</option>
            <option value="42" data-lang="d_seinen">Seinen</option>
            <option value="43" data-lang="d_josei">Josei</option>
            <option value="15" data-lang="d_kids">Kids</option>
          </optgroup>
        </select>
        <input
          type="number"
          id="inputYear"
          class="custom-input"
          placeholder="Tahun"
          data-lang="ph_year"
        />
      </div>

      <div class="search-area zen-hide">
        <button id="btnVoice" class="voice-btn" onclick="startVoiceCommand()">
          <i class="fas fa-microphone"></i>
        </button>
        <button
          id="btnGacha"
          class="gacha-btn"
          onclick="getData()"
          data-lang="btn_search"
        >
          Carikan Anime
        </button>
      </div>
      <p
        id="voiceStatus"
        style="font-size: 0.8rem; margin-top: 5px; opacity: 0; transition: 0.3s"
        class="zen-hide"
        data-lang="listening"
      >
        Mendengarkan...
      </p>

      <div id="resultCard" class="anime-card" style="display: none">
        <div class="card-header">
          <h2 class="anime-title">
            <span id="titleMain">Judul Anime</span>
            <span
              id="titleJp"
              style="font-size: 0.8rem; opacity: 0.7; font-weight: normal"
            ></span>
          </h2>
        </div>
        <img
          id="imgPoster"
          class="anime-poster"
          src=""
          alt="Poster Anime"
          crossorigin="anonymous"
        />
        <div class="content">
          <div class="tag-row">
            <span id="txtScore" class="badge badge-score">‚≠ê 0.0</span>
            <span id="txtEps" class="badge badge-ep">? Eps</span>
            <span id="txtStatus" class="badge badge-status">Status</span>
          </div>
          <p id="txtSynopsis" class="synopsis">Sinopsis...</p>

          <div id="quoteArea" class="quote-box">
            <p class="quote-text">"..."</p>
            <span class="quote-char">- Character</span>
          </div>

          <div class="action-buttons">
            <button
              id="btnFavorite"
              class="fav-btn action-btn"
              onclick="toggleFavorite()"
            >
              <i class="far fa-heart"></i>
            </button>

            <button
              id="btnRecommend"
              class="recommend-btn action-btn"
              onclick="getSimilarAnime()"
              style="display: none"
            >
              <i class="fas fa-magic"></i>
            </button>

            <a
              id="btnTrailer"
              href="#"
              target="_blank"
              class="trailer-btn action-btn"
              data-lang="btn_trailer"
            >
              <i class="fab fa-youtube"></i>
            </a>

            <button
              id="btnSave"
              class="save-btn action-btn"
              onclick="downloadCard()"
              data-lang="btn_save"
            >
              <i class="fas fa-download"></i>
            </button>

            <a
              id="btnShare"
              href="#"
              target="_blank"
              class="share-btn action-btn"
              data-lang="btn_share"
            >
              <i class="fab fa-whatsapp"></i>
            </a>
            <a
              id="linkMal"
              href="#"
              target="_blank"
              class="mal-link action-btn"
              data-lang="link_mal"
            >
              MAL
            </a>
          </div>
        </div>
      </div>
      <div id="skeletonCard" class="anime-card" style="display: none">
        <div class="skeleton-header">
          <div class="skeleton-line title"></div>
          <div class="skeleton-line subtitle"></div>
        </div>
        <div class="skeleton-img"></div>
        <div class="content">
          <div class="tag-row">
            <div class="skeleton-badge"></div>
            <div class="skeleton-badge"></div>
            <div class="skeleton-badge"></div>
          </div>
          <div class="skeleton-line text"></div>
          <div class="skeleton-line text"></div>
          <div class="skeleton-line text short"></div>
        </div>
      </div>
    </div>

    <div id="historyView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeHistory()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>
      <h2 data-lang="hist_title" style="margin-top: 50px">Riwayat</h2>
      <div id="historyList" class="history-list"></div>
      <button
        onclick="clearHistory()"
        class="clear-btn"
        data-lang="btn_clear"
        style="margin-top: 20px"
      >
        Hapus Semua
      </button>
    </div>

    <div id="favoritesView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeFavorites()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>
      <h2 data-lang="fav_title" style="margin-top: 50px">Favorit</h2>
      <div id="favoritesList" class="history-list"></div>
      <p
        class="empty-msg"
        id="favEmptyMsg"
        data-lang="fav_empty"
        style="display: none"
      >
        Belum ada favorit.
      </p>
    </div>

    <div id="scanView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeScan()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>
      <h2 data-lang="scan_title" style="margin-top: 50px">Scan Gambar</h2>
      <p data-lang="scan_desc">
        Upload gambar adegan anime, sistem akan mencarinya!
      </p>
      <div class="upload-box">
        <input
          type="file"
          id="imageInput"
          accept="image/*"
          onchange="previewImage(event)"
        />
        <img id="imagePreview" class="preview-img" style="display: none" />
        <div id="uploadPlaceholder" class="upload-placeholder">
          <i
            class="fas fa-cloud-upload-alt"
            style="font-size: 3rem; color: var(--main-color)"
          ></i>
          <p data-lang="txt_upload">Upload</p>
        </div>
      </div>
      <button
        id="btnScanSearch"
        class="gacha-btn"
        onclick="searchByImage()"
        style="margin-top: 20px; display: none"
      >
        <span data-lang="btn_scan_action">üîç Scan</span>
      </button>
      <div
        id="scanLoading"
        style="display: none; margin-top: 20px; color: #aaa"
        data-lang="txt_processing"
      >
        Sedang memproses...
      </div>
      <div id="scanResult" class="scan-results-container"></div>
    </div>

    <div id="statsView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeStats()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>
      <h2
        style="margin-top: 50px; color: var(--main-color)"
        data-lang="stats_title"
      >
        Statistik
      </h2>
      <div class="stats-card">
        <h3 data-lang="stats_level">Level</h3>
        <div id="wibuLevel" class="level-badge">Newbie</div>
      </div>
      <div class="stats-grid">
        <div class="stat-box">
          <span id="statHistory" class="stat-num">0</span
          ><span data-lang="btn_history">Riwayat</span>
        </div>
        <div class="stat-box">
          <span id="statFav" class="stat-num">0</span
          ><span data-lang="btn_fav">Favorit</span>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="wibuChart"></canvas>
      </div>
    </div>

    <div id="aboutView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeAbout()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>

      <div class="profile-wrapper">
        <div class="profile-card">
          <div class="profile-header">
            <div class="profile-avatar">
              <i class="fas fa-user-astronaut"></i>
            </div>
            <h2 class="profile-name">Kharis Destian Maulana</h2>
            <span class="profile-role" data-lang="about_role"
              >Web Developer</span
            >
          </div>

          <div class="profile-body">
            <p class="profile-quote" data-lang="about_msg">
              Terima kasih sudah menggunakan website ini!
            </p>

            <div class="profile-aliases">
              <p>üáØüáµ „Ç´„É™„Çπ„Éª„Éá„Çπ„ÉÜ„Ç£„Ç¢„É≥„Éª„Éû„Ç¶„É©„Éä</p>
              <p>üá®üá≥ ÂìàÈáåÊñØ¬∑Âæ∑ÊñØËíÇÂÆâ¬∑ÊØõÊãâÁ∫≥</p>
            </div>

            <div class="social-links">
              <a
                href="https://www.instagram.com/kharis_destian?igsh=bWYyZjR6NGY1MGtu"
                target="_blank"
                class="social-btn ig"
              >
                <i class="fab fa-instagram"></i>
                <span>Instagram</span>
              </a>
              <a
                href="https://x.com/RiRay862?t=iDQzj1b6WLunb65j-61-2w&s=09"
                target="_blank"
                class="social-btn tw"
              >
                <i class="fa-brands fa-x-twitter"></i>
                <span>X (Twitter)</span>
              </a>
              <a href="mailto:kharisdestian862@gmail.com" class="social-btn em">
                <i class="fas fa-envelope"></i>
                <span>Email</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="fab-container" id="fabContainer">
      <div class="fab-items">
        <button
          class="toggle-btn mini-fab"
          style="background-color: #00b894"
          onclick="openStats()"
        >
          <i class="fas fa-chart-pie"></i>
        </button>
        <button
          class="toggle-btn mini-fab mobile-only-fab"
          style="background-color: #e17055"
          onclick="openHistory()"
        >
          <i class="fas fa-history"></i>
        </button>
        <button
          class="toggle-btn mini-fab mobile-only-fab"
          style="background-color: #e84393"
          onclick="openFavorites()"
        >
          <i class="fas fa-heart"></i>
        </button>
        <button
          class="toggle-btn mini-fab mobile-only-fab"
          style="background-color: #0984e3"
          onclick="openScan()"
        >
          <i class="fas fa-camera"></i>
        </button>

        <button
          id="zenToggle"
          class="toggle-btn mini-fab"
          style="background-color: #2d3436"
          onclick="toggleZenMode()"
        >
          <i class="fas fa-eye"></i>
        </button>

        <label
          for="colorPicker"
          class="toggle-btn mini-fab"
          style="background-color: #ffffff; cursor: pointer"
        >
          <span style="font-size: 1.2rem">üé®</span>
          <input
            type="color"
            id="colorPicker"
            style="
              position: absolute;
              opacity: 0;
              width: 100%;
              height: 100%;
              cursor: pointer;
            "
          />
        </label>

        <button
          id="musicToggle"
          class="toggle-btn mini-fab"
          style="background-color: #f1c40f"
        >
          <i class="fas fa-music"></i>
        </button>

        <button
          id="langToggle"
          class="toggle-btn mini-fab"
          style="
            background-color: #ff5252;
            font-weight: bold;
            font-size: 0.9rem;
          "
        >
          ID
        </button>

        <button
          id="themeToggle"
          class="toggle-btn mini-fab"
          style="background-color: #6c5ce7"
        >
          <i class="fas fa-moon"></i>
        </button>
      </div>

      <button class="toggle-btn main-fab" onclick="toggleFabMenu()">
        <i class="fas fa-cog" id="fabIcon"></i>
      </button>
    </div>

    <div id="toast-container"></div>
    <div id="youtube-player" style="display: none"></div>
    <audio id="sfxClick" src="click.mp3" preload="auto"></audio>
    <audio id="sfxSuccess" src="success.mp3" preload="auto"></audio>

    <div id="detailView" class="container" style="display: none">
      <button class="nav-btn top-left" onclick="closeDetail()">
        <i class="fas fa-arrow-left"></i>
        <span data-lang="btn_back" style="margin-left: 5px">Kembali</span>
      </button>

      <div class="detail-wrapper">
        <!-- Clean Header Section -->
        <div class="detail-clean-header">
          <div class="detail-poster-section">
            <img id="detailPoster" class="clean-poster" src="" alt="Poster" />
          </div>

          <div class="detail-info-section">
            <h1 id="detailTitle" class="clean-title">Judul Anime</h1>
            <p id="detailTitleNative" class="clean-subtitle">Êó•Êú¨Ë™û„Çø„Ç§„Éà„É´</p>

            <!-- Minimal Stats -->
            <div class="clean-stats">
              <div class="clean-stat">
                <div class="stat-value" id="detailScore">8.5</div>
                <div class="stat-label">Rating</div>
              </div>
              <div class="stat-divider"></div>
              <div class="clean-stat">
                <div class="stat-value" id="detailEpisodes">12</div>
                <div class="stat-label">Episodes</div>
              </div>
              <div class="stat-divider"></div>
              <div class="clean-stat">
                <div class="stat-value" id="detailStatus">Airing</div>
                <div class="stat-label">Status</div>
              </div>
            </div>

            <!-- Primary Actions -->
            <div class="primary-actions">
              <button
                id="detailBtnFav"
                class="primary-btn btn-fav"
                onclick="toggleFavoriteFromDetail()"
              >
                <i class="far fa-heart"></i>
                <span>Favorite</span>
              </button>
              <a
                id="detailBtnTrailer"
                href="#"
                target="_blank"
                class="primary-btn btn-play"
              >
                <i class="fas fa-play"></i>
                <span>Watch Trailer</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Synopsis Section -->
        <div class="detail-clean-section">
          <h2 class="section-heading">Synopsis</h2>
          <p id="detailSynopsis" class="synopsis-text">Loading synopsis...</p>
        </div>

        <!-- Quote Section (Anime only) -->
        <div
          id="detailQuoteSection"
          class="detail-clean-section quote-section"
          style="display: none"
        >
          <div class="modern-quote">
            <i class="fas fa-quote-left quote-icon"></i>
            <p class="modern-quote-text" id="detailQuoteText">"Quote here"</p>
            <p class="modern-quote-char" id="detailQuoteChar">
              - Character Name
            </p>
          </div>
        </div>

        <!-- Secondary Actions -->
        <div class="secondary-actions">
          <button
            id="detailBtnSave"
            class="secondary-btn"
            onclick="downloadDetailCard()"
          >
            <i class="fas fa-download"></i>
            <span>Save Image</span>
          </button>

          <a id="detailBtnMAL" href="#" target="_blank" class="secondary-btn">
            <i class="fas fa-external-link-alt"></i>
            <span>MyAnimeList</span>
          </a>

          <button
            id="detailBtnSimilar"
            class="secondary-btn"
            onclick="getSimilarFromDetail()"
            style="display: none"
          >
            <i class="fas fa-magic"></i>
            <span>Find Similar</span>
          </button>
        </div>
      </div>
    </div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>
  </body>
</html>
